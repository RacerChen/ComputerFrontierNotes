# 面向云原生的服务计算技术

丁志军 教授

## 发展趋势

三条线：

1、单机-cluster-网格计算-云计算

2、以硬件为中心-以软件为中心-以服务为中心

3、主机-小型机-工作站-PC-Laptop-PDA-手机-传感器

> 网格计算，通过各个计算机或计算机集群的计算资源计算。但会存在安全等问题，所以后来由大公司构建云服务器来提供计算资源。

## 云计算

以公开的标准和服务为基础，以互联网为中心，提供安全、快速、便捷的数据存储和网络计算服务。

云：关注的是资源、服务。

## 服务种类

* Iaas基础设施即服务：Amazon EC2，阿里云。提供一个虚拟的机器，需要自己配置环境等。

* Paas平台即服务：Google App Engine，Microsoft Azure，提供平台进行开发，比Iaas更加利于开发与使用。

* Saas软件即服务：Salesforce的CRM，提供更全面的开发接口，更加便捷。

## 云原生

Cloud：表示应用程序位于云中，而不是传统的数据中心。

+

Native：表示从构建开始就考虑云的环境，而不是后期搭建在云上。

### 云原生发展历史

2006年：Google Cgroups

2008年：LXC容器

2010年：OpenStack

2013年：Docker

2014年：Spring Cloud，Google Kubernetes（对Docker进行管理与编排的中间件）

2015年：CNCF基金会成立

2016年：ServiceMesh

### 相关报导

Gartner报告指出，到2022年有75%的全球化企业将在生产中使用云原生的容器化应用。

Kuberneters被认为是云时代的Linux

77%组织采用了微服务

> 动作式API：配置环境要告诉计算机一步步怎么做，下载什么。
>
> 申明式API：声明环境状态，实现由计算机自动化实现。

## 架构分类

### 1、单体式架构

所有的功能集中在一个项目中，开发难度高。

### 2、SOA架构

它将应用程序的不同功能单元（称为服务）进行拆分，并通过这些服务之间定义良好的接口和协议联系起来。接口是采用中立的方式进行定义的，它应该独立于实现服务的硬件平台、操作系统和编程语言。

缺点：

* 企业服务总栈，集中式服务架构
* 集成方式复杂
* 模块间依赖复杂

### 3、微服务架构

将单一应用程序划分成一组小的服务，服务之间相互协调。

## 虚拟化

分区、隔离、封装

eg. Vmware、Para-Virtualizaion准虚拟机（Intel在hardware上支持虚拟技术）、操作系统虚拟化

## 容器

|              | 容器                               | 虚拟机       |
| ------------ | ---------------------------------- | ------------ |
| 启动         | 秒                                 | 分钟         |
| 硬盘         | 小                                 | 大           |
| 本质区别     | 进程级别隔离                       | 系统级别隔离 |
| CPU占用实例  | Docker占1.6%                       | KVM占14.6%   |
| 内存占用实例 | 46M                                | 185M         |
| 缺点         | 隔离性较差，存在性能干扰和安全隐患 |              |

==所以要发展云原生==

### 云原生发展趋势

* 轻：severful->serverless，软件服务与服务器解耦
* 沉：Service Mech，不用关注系统实现
* 广：通过统一的标准实现在任何基础设施上提供和云上一致的功能和体验
* 上：Argo

